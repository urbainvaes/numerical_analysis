\DeclareDocumentCommand\sobolev{m m o} {H^{#1}_{#3}(#2 \IfNoValueF{#3})}
\DeclareDocumentCommand\lp{m m o} {L^{#1}\IfNoValueF{#3}{_{#3}}\left(#2\right)}
\DeclareDocumentCommand\cont{o m o} {C\IfNoValueF{#1}{^{#1}}(#2\IfNoValueF{#3}{;#3})}
\DeclareDocumentCommand\contc{o m o} {C_c\IfNoValueF{#1}{^{#1}}(#2\IfNoValueF{#3}{;#3})}
\DeclareDocumentCommand\norm{s m o} {\IfBooleanTF{#1}{\|#2\|}{\left\|#2\right\|}\IfNoValueF{#3}{_{#3}}}
\DeclareDocumentCommand\seminorm{s m o} {\IfBooleanTF{#1}{\|#2\|}{\left\|#2\right\|}\IfNoValueF{#3}{_{#3}}}
\DeclareDocumentCommand\ip{s m m o} {\IfBooleanTF{#1}{( #2,#3 )}{\left( #2,#3 \right)}\IfNoValueF{#4}{_{#4}}}
\DeclareDocumentCommand\eip{s m m o} {\IfBooleanTF{#1}{\langle #2,#3 \rangle}{\left\langle #2,#3 \right\rangle}\IfNoValueF{#4}{_{#4}}}
\DeclareDocumentCommand\abs{s m o} {\IfBooleanTF{#1}{|#2|}{\left|#2\right|}\IfNoValueF{#3}{_{#3}}}
\DeclareDocumentCommand\eucnorm{s m o} {\IfBooleanTF{#1}{|#2|}{\left|#2\right|}\IfNoValueF{#3}{_{#3}}}
\DeclareDocumentCommand\wass{s o m m} {W_{\IfNoValueF{2}{#2}}\IfBooleanTF{#1}{(#3, #4)}{\left(#3, #4\right)}}

\renewcommand{\t}{\mathsf T}
\DeclareMathOperator{\Law}{Law}
\DeclareMathOperator{\e}{e}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator*{\trace}{tr}
\DeclareMathOperator{\hessian}{\textrm{Hess}}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\newcommand{\bigo}[1]{\mathcal O(#1)}
\newcommand{\proba}{\mathbf P}
\newcommand{\kl}[2]{\mathrm {KL} (#1 \| #2)}
\newcommand{\laplacian}{\Delta}
\newcommand{\commut}[2]{[#1, #2]}
\newcommand{\dummy}{\mathord{\color{black!33}\bullet}}%
\newcommand{\expect}{\mathbf{E}}
\newcommand{\iip}[2]{(\!(#1, #2)\!)}
% \newcommand{\mat}[1]{\bm{\mathit{#1}}}
\newcommand{\mat}[1]{\mathit{#1}}
\newcommand{\nat}{\mathbf N}
\newcommand{\poly}{\mathbf P}
\newcommand{\real}{\mathbf R}
\newcommand{\torus}{\mathbf T}
% \newcommand{\vect}[1]{\boldsymbol{\mathbf #1}}
\newcommand{\vect}[1]{#1}
\newcommand{\grad}{\nabla}
\renewcommand{\d}{\mathrm d}
\newcommand{\one}{\mathbbm 1}
\newcommand{\enorm}[1]{|||#1|||}

% Cahn-Hilliard
\newcommand{\dsurf}{\mathrm d \sigma}
\newcommand{\energyA}[0]{\frac{1}{\varepsilon}}
\newcommand{\energyB}[0]{\varepsilon}

\makeatletter
\DeclareDocumentCommand \derivative{s m o m}{%
    \def\@der{\IfBooleanTF{#1}{\mathrm{d}}{\partial}}
    \def\@default{%
        \mathchoice{%
                \frac{%
                    \@der\ifnum\pdfstrcmp{#2}{1}=0\else^{#2}\fi {\IfNoValueTF{#3}{}{#3}}
                }{%
                    \@for\@token:={#4}\do{\@der \@token}
                }
            } {%
                \@for\@token:={#4}\do{\@der_{\@token}\ifnum\pdfstrcmp{#2}{1}=0\else^{#2}\fi} \IfNoValueTF{#3}{}{#3}
            } {} {}
    }
    \IfBooleanTF{#1}{\IfNoValueTF{#3}{\@default}{%
                #3%
                \ifnum\pdfstrcmp{#2}{1}=0'\else%
                \ifnum\pdfstrcmp{#2}{2}=0''\else%
                \ifnum\pdfstrcmp{#2}{3}=0'''\else%
                \ifnum\pdfstrcmp{#2}{4}=0^{(iv)}\else^{(#2)}\fi\fi\fi\fi
            }
        }{\@default}
}
\makeatother

% \newcommand{\wass}[2]{W_2(#1, #2)}

% \theoremstyle{plain}
% \newtheorem{question}{Question}
% \newtheorem{example}{Example}
% \newtheorem{assumption}{Assumption}[section]
% \newtheorem{lemma}{Lemma}[section]
% \newtheorem{corollary}{Corollary}[section]
% \newtheorem{theorem}{Theorem}[section]
% \newtheorem{proposition}{Proposition}[section]
% \newtheorem{result}{Result}[section]
% \newtheorem{remark}{Remark}[section]
% \numberwithin{equation}{section}

% \newcounter{urbainCounter}
% \newcommand{\urbain}[1]{\stepcounter{urbainCounter}\red{\arabic{urbainCounter}.} \green{#1}}
% \crefname{equation}{eq.}{eqs.}
% \crefname{section}{section}{sections}
% \crefname{lemma}{Lemma}{Lemmata}
% \crefname{remark}{Remark}{Remarks}
% \crefname{proposition}{Proposition}{Propositions}
% \crefname{section}{Section}{Sections}
% \crefname{equation}{}{}
% \Crefname{equation}{Equation}{Equations}
